var b=Object.defineProperty,E=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var m=(e,t,o)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,l=(e,t)=>{for(var o in t||(t={}))T.call(t,o)&&m(e,o,t[o]);if(v)for(var o of v(t))g.call(t,o)&&m(e,o,t[o]);return e},u=(e,t)=>E(e,L(t));import{r as f}from"./index.0d796514.js";import{s as C}from"./elements.9c883ade.js";const h=250;function F(e){const{zIndex:t,position:o}=window.getComputedStyle(e);e.style.overflow="hidden",e.style.overflowX="hidden",e.style.overflowY="hidden",o==="static"&&(e.style.position="relative"),t==="auto"&&(e.style.zIndex="1")}function A(e,t){const{top:o,left:r}=e.getBoundingClientRect(),{clientWidth:i,clientHeight:n}=e,p=Math.sqrt(i**2+n**2)/2,c=p*2,s=t.touches[0].clientX-r,a=t.touches[0].clientY-o,w=(i-p*2)/2,_=(n-p*2)/2,k=s-p,x=a-p;return{x:k,y:x,centerX:w,centerY:_,size:c}}function y(e){const t=this._ripple;if(t.removeRipple(),t.disabled||t.tasker)return;const o=()=>{var a;t.tasker=null;const{x:r,y:i,centerX:n,centerY:p,size:c}=A(this,e),s=document.createElement("div");s.classList.add("var-ripple"),s.style.opacity="0",s.style.transform=`translate(${r}px, ${i}px) scale3d(.3, .3, .3)`,s.style.width=`${c}px`,s.style.height=`${c}px`,s.style.backgroundColor=(a=t.color)!=null?a:"currentColor",s.dataset.createdAt=String(performance.now()),F(this),this.appendChild(s),window.setTimeout(()=>{s.style.transform=`translate(${n}px, ${p}px) scale3d(1, 1, 1)`,s.style.opacity=".25"},20)};t.tasker=window.setTimeout(o,60)}function d(){const e=this._ripple,t=()=>{const o=this.querySelectorAll(".var-ripple");if(!o.length)return;const r=o[o.length-1],i=h-performance.now()+Number(r.dataset.createdAt);setTimeout(()=>{r.style.opacity="0",setTimeout(()=>{var n;return(n=r.parentNode)==null?void 0:n.removeChild(r)},h)},i)};e.tasker?setTimeout(t,60):t()}function R(){const e=this._ripple;!C()||!e.touchmoveForbid||(e.tasker&&window.clearTimeout(e.tasker),e.tasker=null)}function $(e,t){var o,r,i;e._ripple=u(l({tasker:null},(o=t.value)!=null?o:{}),{touchmoveForbid:(i=(r=t.value)==null?void 0:r.touchmoveForbid)!=null?i:f.touchmoveForbid,removeRipple:d.bind(e)}),e.addEventListener("touchstart",y,{passive:!0}),e.addEventListener("touchmove",R,{passive:!0}),e.addEventListener("dragstart",d,{passive:!0}),document.addEventListener("touchend",e._ripple.removeRipple,{passive:!0}),document.addEventListener("touchcancel",e._ripple.removeRipple,{passive:!0})}function I(e){e.removeEventListener("touchstart",y),e.removeEventListener("touchmove",R),e.removeEventListener("dragstart",d),document.removeEventListener("touchend",e._ripple.removeRipple),document.removeEventListener("touchcancel",e._ripple.removeRipple)}function N(e,t){var o,r,i;e._ripple=u(l(l({},e._ripple),(o=t.value)!=null?o:{}),{touchmoveForbid:(i=(r=t.value)==null?void 0:r.touchmoveForbid)!=null?i:f.touchmoveForbid,tasker:null})}const z={inserted:$,unbind:I,update:N,install(e){e.directive("ripple",this)}};export{z as R};
