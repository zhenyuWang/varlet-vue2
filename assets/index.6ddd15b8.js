var v=Object.defineProperty,d=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var u=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var p=(e,o,t)=>o in e?v(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,c=(e,o)=>{for(var t in o||(o={}))_.call(o,t)&&p(e,t,o[t]);if(u)for(var t of u(o))y.call(o,t)&&p(e,t,o[t]);return e},m=(e,o)=>d(e,C(o));import{p as h,P as g}from"./index.89a8aba0.js";import{B}from"./index.2464bdff.js";import{p as $,m as k}from"./components.1b7f472c.js";import{d as S}from"./create.242e0646.js";import{g as x,h as w,d as b,i as T}from"./shared.f8da68a0.js";import{p as O}from"./en-US.1fd70412.js";import{n as V}from"./index.31927c0d.js";import{V as D}from"./vendor.4f0eb98f.js";function P(e){return["left","center","right"].includes(e)}const z=c({show:{type:Boolean,default:!1},title:{type:String},message:{type:String},messageAlign:{type:String,default:"left",validator:P},confirmButton:{type:Boolean,default:!0},cancelButton:{type:Boolean,default:!0},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonTextColor:{type:String},cancelButtonTextColor:{type:String},confirmButtonColor:{type:String},cancelButtonColor:{type:String},dialogClass:{type:String},dialogStyle:{type:Object},beforeClose:{type:Function}},$(h,["overlay","overlayClass","overlayStyle","lockScroll","closeOnClickOverlay","teleport"]));var A=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("var-popup",{staticClass:"var-dialog__popup",attrs:{"var-dialog-cover":"",show:e.popupShow,overlay:e.overlay,"overlay-class":e.overlayClass,"overlay-style":e.overlayStyle,"lock-scroll":e.lockScroll,"close-on-click-overlay":e.popupCloseOnClickOverlay,teleport:e.teleport},on:{open:function(l){return e.$emit("open")},close:function(l){return e.$emit("close")},closed:function(l){return e.$emit("closed")},opened:function(l){return e.$emit("opened")},"route-change":function(l){return e.$emit("route-change")},"click-overlay":e.handleClickOverlay}},[t("div",e._b({staticClass:"var--box var-dialog",class:e.dialogClass,style:e.dialogStyle},"div",e.$attrs,!1),[t("div",{staticClass:"var-dialog__title"},[e._t("title",function(){return[e._v(e._s(e.dt(e.title,e.pack.dialogTitle)))]})],2),t("div",{staticClass:"var-dialog__message",style:{textAlign:e.messageAlign}},[e._t("default",function(){return[e._v(" "+e._s(e.message)+" ")]})],2),t("div",{staticClass:"var-dialog__actions"},[e.cancelButton?t("var-button",{staticClass:"var-dialog__button var-dialog__cancel-button",attrs:{"var-dialog-cover":"",text:"","text-color":e.cancelButtonTextColor,color:e.cancelButtonColor},on:{click:e.cancel}},[e._v(" "+e._s(e.dt(e.cancelButtonText,e.pack.dialogCancelButtonText))+" ")]):e._e(),e.confirmButton?t("var-button",{staticClass:"var-dialog__button var-dialog__confirm-button",attrs:{"var-dialog-cover":"",text:"","text-color":e.confirmButtonTextColor,color:e.confirmButtonColor},on:{click:e.confirm}},[e._v(" "+e._s(e.dt(e.confirmButtonText,e.pack.dialogConfirmButtonText))+" ")]):e._e()],1)])])},j=[];const F=S({name:"VarDialog",components:{VarPopup:g,VarButton:B},inheritAttrs:!1,props:z,data:()=>({popupShow:!1,popupCloseOnClickOverlay:!1}),computed:{pack(){return O.value}},watch:{show:{handler(e){this.popupShow=e},immediate:!0},closeOnClickOverlay:{handler(e){if(this.getListeners().onBeforeClose!=null){this.popupCloseOnClickOverlay=!1;return}this.popupCloseOnClickOverlay=e},immediate:!0}},methods:{dt:x,done(){this.$emit("update:show",!1)},normalizeBeforeClose(){return this.getListeners().onBeforeClose||this.beforeClose},handleClickOverlay(){const{closeOnClickOverlay:e,normalizeBeforeClose:o}=this,t=o();if(this.$emit("click-overlay"),!!e){if(t!=null){t("close",this.done);return}this.$emit("update:show",!1)}},confirm(){const e=this.normalizeBeforeClose();if(this.$emit("confirm"),e!=null){e("confirm",this.done);return}this.$emit("update:show",!1)},cancel(){const e=this.normalizeBeforeClose();if(this.$emit("cancel"),e!=null){e("cancel",this.done);return}this.$emit("update:show",!1)}}}),f={};var I=V(F,A,j,!1,L,null,null,null);function L(e){for(let o in f)this[o]=f[o]}var a=function(){return I.exports}();let r;function s(e){return w()?new Promise(o=>{s.close();const t=b(e)||T(e)?{message:String(e)}:e,{instance:l,unmount:i}=k(a,"body",{propsData:m(c({},t),{beforeClose:t.onBeforeClose})});l.show=!0,r=l,l.$on("open",()=>{var n;return(n=t.onOpen)==null?void 0:n.call(t)}),l.$on("opened",()=>{var n;return(n=t.onOpened)==null?void 0:n.call(t)}),l.$on("click-overlay",()=>{var n;return(n=t.onClickOverlay)==null?void 0:n.call(t)}),l.$on("close",()=>{var n;(n=t.onClose)==null||n.call(t),o("close")}),l.$on("closed",()=>{var n;(n=t.onClosed)==null||n.call(t),i(),r===l&&(r=null)}),l.$on("confirm",()=>{var n;(n=t.onConfirm)==null||n.call(t),o("confirm")}),l.$on("cancel",()=>{var n;(n=t.onCancel)==null||n.call(t),o("cancel")}),l.$on("route-change",()=>{i(),r===l&&(r=null)}),l.$on("update:show",n=>{l.show=n})}):Promise.resolve()}s.close=()=>{if(r!=null){const e=r;r=null,D.nextTick(()=>{e.show=!1})}};a.install=function(e){e.component(a.name,a)};s.install=function(e){e.component(a.name,a)};s.Component=a;export{s as D};
