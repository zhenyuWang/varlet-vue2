import{d as g}from"./create.242e0646.js";import{V as y,F as w}from"./validation.eabac9ae.js";import{t as C}from"./shared.f8da68a0.js";import{L as b}from"./index.32e6addf.js";import{R as x}from"./index.8d5eec0c.js";import{c as V}from"./relation.9e421618.js";import{n as $}from"./index.6222f8b9.js";const k={value:{default:!1},activeValue:{default:!0},inactiveValue:{default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},color:{type:String},loadingColor:{type:String},closeColor:{type:String},size:{type:[String,Number],default:20},rules:{type:Array},ripple:{type:Boolean,default:!0},onClick:{type:Function},onChange:{type:Function},onInput:{type:Function}};var S=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"var-switch"},[i("div",{staticClass:"var-switch-block",class:[e.disabled||e.formDisabled?"var-switch__disable":null],style:e.styleComputed.switch,on:{click:e.switchActive}},[i("div",{staticClass:"var-switch__track",class:[e.value===e.activeValue?"var-switch__track-active":null,e.errorMessage?"var-switch__track-error":null],style:e.styleComputed.track}),i("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{disabled:!e.ripple||e.disabled||e.loading||e.formDisabled},expression:`{
        disabled: !ripple || disabled || loading || formDisabled,
      }`}],staticClass:"var-switch__ripple",style:e.styleComputed.ripple},[i("div",{staticClass:"var-switch__handle var-elevation--2",class:[e.value===e.activeValue?"var-switch__handle-active":null,e.errorMessage?"var-switch__handle-error":null],style:e.styleComputed.handle},[e.loading?i("var-loading",{attrs:{radius:e.toNumber(e.size)/2-2}}):e._e()],1)])]),i("var-form-details",{attrs:{"error-message":e.errorMessage}})],1)},F=[];const L=g({name:"VarSwitch",mixins:[y,V("form",{parentKey:"form",childrenKey:"formItems"})],components:{VarLoading:b,VarFormDetails:w},directives:{Ripple:x},props:k,computed:{formReadonly(){var e;return(e=this.form)==null?void 0:e.readonly},formDisabled(){var e;return(e=this.form)==null?void 0:e.disabled},styleComputed(){const{size:e,value:t,color:i,closeColor:l,loadingColor:n,activeValue:a}=this,r=this.toNumber(e),s=r*2,o=r*1.2;return{handle:{width:`${e}px`,height:`${e}px`,backgroundColor:t===a?i||"":l||"",color:n&&n},ripple:{left:t===a?`${r/2}px`:`-${r/2}px`,color:t===a?i||"":l||"#999",width:`${r*2}px`,height:`${r*2}px`},track:{height:`${o*.6}px`,width:`${s-2}px`,borderRadius:`${s/3}px`,filter:t===a||(this==null?void 0:this.errorMessage)?"opacity(.6)":"brightness(.6)",backgroundColor:t===a?i||"":l||""},switch:{height:`${o}px`,width:`${s}px`}}}},methods:{reset(){var e,t;(t=(e=this.getListeners()).onInput)==null||t.call(e,this.inactiveValue),this.resetValidation()},validate(){this._validate(this.rules,this.value)},toNumber:C,switchActive(e){var o,d,u,h,p,v,m,f;const{disabled:t,loading:i,readonly:l,value:n,activeValue:a,inactiveValue:r}=this;if((d=(o=this.getListeners()).onClick)==null||d.call(o,e),t||i||l||((u=this.form)==null?void 0:u.disabled)||((h=this.form)==null?void 0:h.readonly))return;const s=n===a?r:a;(v=(p=this.getListeners()).onChange)==null||v.call(p,s),(f=(m=this.getListeners()).onInput)==null||f.call(m,s),this.validateWithTrigger()},validateWithTrigger(){this.$nextTick(()=>{const{rules:e,value:t}=this;this._validateWithTrigger(["onChange"],"onChange",e,t)})}}}),_={};var M=$(L,S,F,!1,D,null,null,null);function D(e){for(let t in _)this[t]=_[t]}var c=function(){return M.exports}();c.install=function(e){e.component(c.name,c)};export{c as S};
