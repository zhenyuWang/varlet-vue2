import{A as z}from"./AppType.8a316df5.js";import{d as T}from"./create.242e0646.js";import{d as f}from"./index.fa127700.js";import{t as o}from"./shared.f8da68a0.js";import{n as S}from"./index.6222f8b9.js";import{d as E}from"./index.079ade67.js";import{u as j,a as U,_ as L,b as O,c as X}from"./en-US.1fd70412.js";import{w as Y,a as q}from"./utils.3b864b4e.js";import"./vendor.4f0eb98f.js";const l=["12","1","2","3","4","5","6","7","8","9","10","11"],c=["00","13","14","15","16","17","18","19","20","21","22","23"],$=["00","05","10","15","20","25","30","35","40","45","50","55"];function W(e){return["ampm","24hr"].includes(e)}const G={value:{type:String},shadow:{type:Boolean,default:!1},color:{type:String},headerColor:{type:String},format:{type:String,default:"ampm",validator:W},allowedTime:{type:Object},min:{type:String},max:{type:String},useSeconds:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},D=(e,i)=>e==="24hr"||i==="am",I=(e,i,t)=>{const s=l.findIndex(n=>o(n)===o(t)),r=D(e,i)?t:c[s];return{hourStr:r,hourNum:o(r)}},u=e=>{const[i,t,s]=e.split(":");return{hour:o(i),minute:o(t),second:o(s)}},P=e=>{var y,g;const{time:i,format:t,ampm:s,hour:r,max:n,min:a,disableHour:m}=e,{hourStr:x,hourNum:H}=I(t,s,r);let h=!1,b=!1;if(m.includes(x))return!0;if(n&&!a){const{hour:v,minute:d}=u(n);h=v===H&&i>d}if(!n&&a){const{hour:v,minute:d}=u(a);h=v===H&&i<d}if(n&&a){const{hour:v,minute:d}=u(n),{hour:p,minute:_}=u(a);h=p===H&&i<_||v===H&&i>d}return((y=e.allowedTime)==null?void 0:y.minutes)&&(b=(g=e.allowedTime)==null?void 0:g.minutes(i)),h||b},N=e=>{var g,v;const{time:i,format:t,ampm:s,hour:r,minute:n,max:a,min:m,disableHour:x}=e,{hourStr:H,hourNum:h}=I(t,s,r);let b=!1,y=!1;if(x.includes(H))return!0;if(a&&!m){const{hour:d,minute:p,second:_}=u(a);b=d===h&&p<n||p===n&&i>_}if(!a&&m){const{hour:d,minute:p,second:_}=u(m);b=d===h&&p>n||p===n&&i>_}if(a&&m){const{hour:d,minute:p,second:_}=u(a),{hour:M,minute:C,second:B}=u(m);b=d===h&&p<n||M===h&&C>n||d===h&&p===n&&i>_||M===h&&C===n&&i<B}return((g=e.allowedTime)==null?void 0:g.seconds)&&(y=(v=e.allowedTime)==null?void 0:v.seconds(i)),b||y};var J=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"var-time-picker-clock"},[t("div",{staticClass:"var-time-picker-clock__hand",style:e.handStyle}),e._l(e.timeScales,function(s,r){return t("div",{key:s,staticClass:"var-time-picker-clock__item",class:[e.isActive(r,!1)?"var-time-picker-clock__item--active":null,e.isDisable(s)?"var-time-picker-clock__item--disable":null],style:e.getStyle(r,s,!1)},[e._v(" "+e._s(s)+" ")])}),e.format==="24hr"&&e.type==="hour"?t("div",{ref:"inner",staticClass:"var-time-picker-clock__inner"},e._l(e.hours24,function(s,r){return t("div",{key:s,staticClass:"var-time-picker-clock__item",class:[e.isActive(r,!0)?"var-time-picker-clock__item--active":null,e.isDisable(s)?"var-time-picker-clock__item--disable":null],style:e.getStyle(r,s,!0)},[e._v(" "+e._s(s)+" ")])}),0):e._e()],2)},K=[];const Q=T({name:"Clock",props:{isInner:{type:Boolean,required:!0},rad:{type:Number},format:{type:String,default:"ampm"},allowedTime:{type:Object},time:{type:Object,required:!0},useSeconds:{type:Boolean,default:!1},preventNextUpdate:{type:Boolean,default:!1},type:{type:String,default:"hour"},ampm:{type:String,default:"am"},color:{type:String},min:{type:String},max:{type:String}},data:()=>({inner:null,disableHour:[],disable24HourIndex:[]}),computed:{hours24(){return c},handStyle(){return{transform:`rotate(${o(this.rad)}deg)`,height:this.isInner&&this.type==="hour"?"calc(50% - 40px)":"calc(50% - 4px)",backgroundColor:this.getHandleColor(),borderColor:this.getHandleColor()}},activeItemIndex(){if(this.rad===void 0)return;const e=this.rad/30;return e>=0?e:e+12},timeScales(){return this.type==="hour"?l:$},activeItemIndexAndIsInner(){return[this.activeItemIndex,this.isInner]}},methods:{isDisableMinSec(e,i){e=e!=null?e:this.type==="minute"?this.time.minute:this.time.second;const t=this.type==="minute"?P:N,s={time:o(e),format:this.format,ampm:this.ampm,hour:this.time.hour,minute:o(this.time.minute),max:this.max,min:this.min,allowedTime:this.allowedTime,disableHour:this.disableHour};return i&&this.type==="minute"&&Reflect.deleteProperty(s,"minute"),t(s)},getHandleColor(){if(this.activeItemIndex===void 0)return this.color;const e=this.isInner?c[this.activeItemIndex]:this.timeScales[this.activeItemIndex];return this.timeScales===$?this.isDisableMinSec()?"#bdbdbd":this.color:this.isDisable(e)?"#bdbdbd":this.color},isActive(e,i){return i?this.activeItemIndex===e&&this.isInner:this.activeItemIndex===e&&(!this.isInner||this.type!=="hour")},isDisable(e){if(this.type==="hour"){if(D(this.format,this.ampm))return this.disableHour.includes(e);const i=l.findIndex(t=>t===e);return this.disable24HourIndex.includes(i)}return this.isDisableMinSec(e,!0)},getStyle(e,i,t){const s=2*Math.PI/12*e-Math.PI/2,r=50*(1+Math.cos(s)),n=50*(1+Math.sin(s)),a=()=>this.isActive(e,t)?this.isDisable(i)?{backgroundColor:"#bdbdbd",color:"#fff"}:{backgroundColor:this.color,color:void 0}:{backgroundColor:void 0,color:void 0},{backgroundColor:m,color:x}=a();return{left:`${r}%`,top:`${n}%`,backgroundColor:m,color:x}},getSize(){const{width:e,height:i}=this.inner.getBoundingClientRect();return{width:e,height:i}},getHour(){return this.activeItemIndex===void 0?void 0:(this.ampm==="am"?l:c)[this.activeItemIndex].padStart(2,"0")}},watch:{activeItemIndexAndIsInner([e,i],[t,s]){if(e===t&&i===s||this.type!=="hour"||this.activeItemIndex===void 0)return;const n=i?c[this.activeItemIndex]:this.getHour(),a=this.useSeconds?`:${this.time.second}`:"",m=`${n}:${this.time.minute}${a}`;this.preventNextUpdate||this.$emit("update",m),this.$emit("change-prevent-update")},rad(e,i){if(this.type==="hour"||e===void 0||i===void 0)return;const t=e/6>=0?e/6:e/6+60,s=i/6>=0?i/6:i/6+60;if(t===s)return;let r;const{hourStr:n}=I(this.format,this.ampm,this.time.hour);if(this.type==="minute"){const a=f().minute(t).format("mm"),m=this.useSeconds?`:${this.time.second}`:"";r=`${n}:${a}${m}`}if(this.type==="second"){const a=f().second(t).format("ss"),m=this.useSeconds?`:${a}`:"";r=`${n}:${this.time.minute}${m}`}this.$emit("update",r)},max:{handler(e){var i;if(this.disableHour=[],e&&!this.min){const{hour:t}=u(e),s=l.filter(n=>o(n)>t),r=c.filter(n=>o(n)>t);this.disableHour=[...s,...r]}if(!e&&this.min){const{hour:t}=u(this.min),s=l.filter(n=>o(n)<t),r=c.filter(n=>o(n)<t);this.disableHour=[...s,...r]}if(e&&this.min){const{hour:t}=u(e),{hour:s}=u(this.min),r=l.filter(a=>o(a)<s||o(a)>t),n=c.filter(a=>o(a)<s||o(a)>t);this.disableHour=[...r,...n]}if((i=this.allowedTime)==null?void 0:i.hours){const{hours:t}=this.allowedTime,s=l.filter(n=>!t(o(n))),r=c.filter(n=>!t(o(n)));this.disableHour=[...new Set([...this.disableHour,...s,...r])]}this.disable24HourIndex=this.disableHour.map(t=>c.findIndex(s=>t===s)).filter(t=>t>=0)},immediate:!0},min:{handler(e){var i;if(this.disableHour=[],this.max&&!e){const{hour:t}=u(this.max),s=l.filter(n=>o(n)>t),r=c.filter(n=>o(n)>t);this.disableHour=[...s,...r]}if(!this.max&&e){const{hour:t}=u(e),s=l.filter(n=>o(n)<t),r=c.filter(n=>o(n)<t);this.disableHour=[...s,...r]}if(this.max&&e){const{hour:t}=u(this.max),{hour:s}=u(e),r=l.filter(a=>o(a)<s||o(a)>t),n=c.filter(a=>o(a)<s||o(a)>t);this.disableHour=[...r,...n]}if((i=this.allowedTime)==null?void 0:i.hours){const{hours:t}=this.allowedTime,s=l.filter(n=>!t(o(n))),r=c.filter(n=>!t(o(n)));this.disableHour=[...new Set([...this.disableHour,...s,...r])]}this.disable24HourIndex=this.disableHour.map(t=>c.findIndex(s=>t===s)).filter(t=>t>=0)},immediate:!0},allowedTime:{handler(e){if(this.disableHour=[],this.max&&!this.min){const{hour:i}=u(this.max),t=l.filter(r=>o(r)>i),s=c.filter(r=>o(r)>i);this.disableHour=[...t,...s]}if(!this.max&&this.min){const{hour:i}=u(this.min),t=l.filter(r=>o(r)<i),s=c.filter(r=>o(r)<i);this.disableHour=[...t,...s]}if(this.max&&this.min){const{hour:i}=u(this.max),{hour:t}=u(this.min),s=l.filter(n=>o(n)<t||o(n)>i),r=c.filter(n=>o(n)<t||o(n)>i);this.disableHour=[...s,...r]}if(e==null?void 0:e.hours){const{hours:i}=e,t=l.filter(r=>!i(o(r))),s=c.filter(r=>!i(o(r)));this.disableHour=[...new Set([...this.disableHour,...t,...s])]}this.disable24HourIndex=this.disableHour.map(i=>c.findIndex(t=>i===t)).filter(i=>i>=0)},immediate:!0}},mounted(){this.inner=this.$refs.inner}}),w={};var Z=S(Q,J,K,!1,V,null,null,null);function V(e){for(let i in w)this[i]=w[i]}var ee=function(){return Z.exports}(),te=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{ref:"picker",staticClass:"var-time-picker",class:[e.shadow?"var-elevation--2":null]},[t("div",{staticClass:"var-time-picker-title",style:{background:e.headerColor||e.color}},[t("div",{staticClass:"var-time-picker-title__time"},[t("div",{staticClass:"var-time-picker-title__btn",class:e.type==="hour"?"var-time-picker-title__btn--active":null,on:{click:function(s){return e.checkPanel("hour")}}},[e._v(" "+e._s(e.time.hour)+" ")]),t("span",[e._v(":")]),t("div",{staticClass:"var-time-picker-title__btn",class:e.type==="minute"?"var-time-picker-title__btn--active":null,on:{click:function(s){return e.checkPanel("minute")}}},[e._v(" "+e._s(e.time.minute)+" ")]),e.useSeconds?t("span",[e._v(":")]):e._e(),e.useSeconds?t("div",{staticClass:"var-time-picker-title__btn",class:e.type==="second"?"var-time-picker-title__btn--active":null,on:{click:function(s){return e.checkPanel("second")}}},[e._v(" "+e._s(e.time.second)+" ")]):e._e()]),e.format==="ampm"?t("div",{staticClass:"var-time-picker-title__ampm"},[t("div",{staticClass:"var-time-picker-title__btn",class:e.ampm==="am"?"var-time-picker-title__btn--active":null,on:{click:function(s){return e.checkAmpm("am")}}},[e._v(" AM ")]),t("div",{staticClass:"var-time-picker-title__btn",class:e.ampm==="pm"?"var-time-picker-title__btn--active":null,on:{click:function(s){return e.checkAmpm("pm")}}},[e._v(" PM ")])]):e._e()]),t("div",{staticClass:"var-time-picker-body"},[t("div",{ref:"container",staticClass:"var-time-picker-clock__container",on:{touchstart:e.moveHand,touchmove:e.moveHand,touchend:e.end}},[t("transition",{attrs:{name:"var-time-picker-panel-fade"}},[t("clock",{key:e.type,ref:"inner",attrs:{type:e.type,ampm:e.ampm,color:e.color,"is-inner":e.isInner,format:e.format,"allowed-time":e.allowedTime,rad:e.getRad,time:e.time,"prevent-next-update":e.isPreventNextUpdate,"use-seconds":e.useSeconds,max:e.max,min:e.min},on:{update:e.update,"change-prevent-update":e.changePreventUpdate}})],1)],1)])])},ie=[];const se=T({name:"VarTimePicker",components:{Clock:ee},props:G,data:()=>({container:null,picker:null,inner:null,isInner:!1,isPreventNextUpdate:!1,isActualInner:!1,isChosenUsableHour:!1,isChosenUsableMinute:!1,hourRad:void 0,minuteRad:0,secondRad:0,type:"hour",ampm:"am",isDisableHour:!1,isDisableMinute:!1,time:{hour:"00",minute:"00",second:"00"},center:{x:0,y:0},innerRange:{x:[],y:[]}}),computed:{getRad(){return this.type==="hour"?this.hourRad:this.type==="minute"?this.minuteRad:this.secondRad}},methods:{update(e){const{onInput:i,onChange:t}=this.getListeners();i==null||i(e),t==null||t(e)},rad2deg(e){return e*57.29577951308232},checkPanel(e){this.isChosenUsableHour=!1,this.isDisableMinute=!1,this.type=e},findAvailableHour(e){const{disableHour:i}=this.inner,t=l.findIndex(n=>o(n)===o(this.time.hour)),s=e==="am"?l:c;return[...s.slice(t),...s.slice(0,t)].find((n,a)=>(this.isPreventNextUpdate=a!==0,!i.includes(n)))},checkAmpm(e){if(this.readonly)return;this.ampm=e;const i=this.findAvailableHour(e);if(!i)return;const t=this.useSeconds?`:${this.time.second}`:"",s=`${i.padStart(2,"0")}:${this.time.minute}${t}`;this.update(s)},getInner(e,i){const t=e>=this.innerRange.x[0]&&e<=this.innerRange.x[1],s=i>=this.innerRange.y[0]&&i<=this.innerRange.y[1];return t&&s},getTime(e){const i=this.format==="24hr"?"HH":"hh",{hour:t,minute:s,second:r}=u(e);return{hour:f().hour(t).format(i),minute:f().minute(s).format("mm"),second:f().second(r).format("ss")}},getHourIndex(e){const i=e/30;return i>=0?i:i+12},getRangeSize(){const{width:e,height:i}=this.inner.getSize(),t=this.center.x-e/2-8,s=this.center.x+e/2+8,r=this.center.y-i/2-8,n=this.center.y+i/2+8;return{rangeXMin:t,rangeXMax:s,rangeYMin:r,rangeYMax:n}},setHourRad(e,i,t){const{disableHour:s}=this.inner;this.isActualInner=this.getInner(e,i);const r=Math.round(t/30)*30+90,n=this.getHourIndex(r),a=this.isInner?l[n]:c[n];if(s.includes(a)||(this.isInner=this.format==="24hr"?this.getInner(e,i):!1),this.isInner!==this.isActualInner)return;const m=this.isInner||this.ampm==="pm"?c[n]:l[n];this.isDisableHour=s.includes(m),!this.isDisableHour&&(this.hourRad=r,this.isChosenUsableHour=!0)},setMinuteRad(e){const{disableHour:i}=this.inner,t=Math.round(e/6)*6+90,r={time:t/6>=0?t/6:t/6+60,format:this.format,ampm:this.ampm,hour:this.time.hour,max:this.max,min:this.min,disableHour:i,allowedTime:this.allowedTime};this.isDisableMinute=P(r),!this.isDisableMinute&&(this.minuteRad=t,this.isChosenUsableMinute=!0)},setSecondRad(e){const{disableHour:i}=this.inner,t=Math.round(e/6)*6+90,r={time:t/6>=0?t/6:t/6+60,format:this.format,ampm:this.ampm,hour:this.time.hour,minute:o(this.time.minute),max:this.max,min:this.min,disableHour:i,allowedTime:this.allowedTime};N(r)||(this.secondRad=t)},setCenterAndRange(){const{left:e,top:i,width:t,height:s}=this.container.getBoundingClientRect();if(this.center.x=e+t/2,this.center.y=i+s/2,this.type==="hour"&&this.format==="24hr"){const{rangeXMin:r,rangeXMax:n,rangeYMin:a,rangeYMax:m}=this.getRangeSize();this.innerRange.x=[r,n],this.innerRange.y=[a,m]}},moveHand(e){if(this.readonly)return;this.setCenterAndRange();const{clientX:i,clientY:t}=e.touches[0],s=i-this.center.x,r=t-this.center.y,n=Math.round(this.rad2deg(Math.atan2(r,s)));this.type==="hour"?this.setHourRad(i,t,n):this.type==="minute"?this.setMinuteRad(n):this.setSecondRad(n)},end(){if(!this.readonly){if(this.type==="hour"&&this.isChosenUsableHour){this.type="minute";return}this.type==="minute"&&this.useSeconds&&this.isChosenUsableMinute&&(this.type="second")}},changePreventUpdate(){this.isPreventNextUpdate=!1}},watch:{value:{handler(e){if(e){const{hour:i,minute:t,second:s}=u(e),r=f().hour(i).format("hh"),n=f().hour(i).format("HH"),a=f().minute(t).format("mm"),m=f().second(s).format("ss");this.hourRad=(r==="12"?0:o(r))*30,this.minuteRad=o(a)*6,this.secondRad=o(m)*6,this.time=this.getTime(e),this.format!=="24hr"&&(this.ampm=`${i}`.padStart(2,"0")===n&&c.includes(n)?"pm":"am"),this.isInner=this.format==="24hr"&&c.includes(n)}},immediate:!0}},created(){this.$nextTick(()=>{this.container=this.$refs.container,this.inner=this.$refs.inner,this.picker=this.$refs.picker})}}),A={};var ne=S(se,te,ie,!1,re,null,null,null);function re(e){for(let i in A)this[i]=A[i]}var k=function(){return ne.exports}();k.install=function(e){e.component(k.name,k)};var oe={basicUsage:"\u57FA\u672C\u4F7F\u7528",hour24:"24\u5C0F\u65F6\u683C\u5F0F",readonly:"\u53EA\u8BFB",timeLimit:"\u65F6\u95F4\u9650\u5236",custom:"\u81EA\u5B9A\u4E49",showSecond:"\u663E\u793A\u79D2"},ae={basicUsage:"Basic Usage",hour24:"24hr Format",readonly:"Readonly",timeLimit:"Time Limit",custom:"Custom",showSecond:"show-seconds"};const{add:F,use:ce,pack:ue,packs:Ie,merge:Me}=j(),me=e=>{X(e),ce(e)};U("zh-CN",L);U("en-US",O);F("zh-CN",oe);F("en-US",ae);var le=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",[t("div",[t("app-type",[e._v(e._s(e.pack.basicUsage))]),t("var-time-picker",{model:{value:e.date,callback:function(s){e.date=s},expression:"date"}})],1),t("div",[t("app-type",[e._v(e._s(e.pack.hour24))]),t("var-time-picker",{attrs:{format:"24hr",shadow:""},model:{value:e.date1,callback:function(s){e.date1=s},expression:"date1"}})],1),t("div",[t("app-type",[e._v(e._s(e.pack.showSecond))]),t("var-time-picker",{attrs:{format:"24hr","use-seconds":""},model:{value:e.date5,callback:function(s){e.date5=s},expression:"date5"}})],1),t("div",[t("app-type",[e._v(e._s(e.pack.readonly))]),t("var-time-picker",{attrs:{readonly:"",shadow:""},model:{value:e.date2,callback:function(s){e.date2=s},expression:"date2"}})],1),t("div",[t("app-type",[e._v(e._s(e.pack.timeLimit))]),t("var-time-picker",{attrs:{format:"24hr","use-seconds":"",min:"2:28:38",max:"19:40:22","allowed-time":e.allowedTime},model:{value:e.date3,callback:function(s){e.date3=s},expression:"date3"}})],1),t("div",{staticStyle:{"padding-bottom":"20px"}},[t("app-type",[e._v(e._s(e.pack.custom))]),t("var-time-picker",{attrs:{shadow:"","header-color":"purple",color:"#7bb872",min:"2:28:38",max:"19:40:22"},on:{change:e.change},model:{value:e.date4,callback:function(s){e.date4=s},expression:"date4"}})],1)])},de=[];const he={name:"TimePickerExample",components:{VarTimePicker:k,AppType:z},data:()=>({date:"11:20",date1:"15:10",date2:"07:10",date3:"07:10:12",date4:"05:10",date5:"17:36:22",allowedTime:{hours(e){return e%2===0},minutes(e){return e%15!==0},seconds(e){return e%2!==0}}}),computed:{pack(){return ue.value}},created(){Y(this,me),q(this,E)},methods:{change(e){console.log(e)}}},R={};var pe=S(he,le,de,!1,fe,null,null,null);function fe(e){for(let i in R)this[i]=R[i]}var Ce=function(){return pe.exports}();export{Ce as default};
