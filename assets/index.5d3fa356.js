import{S as x}from"./index.ab5077f3.js";import{d as p}from"./create.242e0646.js";import{c as y,a as k}from"./relation.9e421618.js";import{n as c}from"./index.31927c0d.js";import{t as d,f as b,l as g}from"./shared.f8da68a0.js";import{h,c as C,r as T,f as $,d as S,e as E,n as w}from"./elements.9c883ade.js";import{C as B}from"./index.e0b37af0.js";import{d as I}from"./index.9b1139e6.js";import{u as A,a as v,_ as z,b as L,c as M}from"./en-US.1fd70412.js";import{w as N,a as O}from"./utils.3b864b4e.js";import"./vendor.4f0eb98f.js";import"./index.066dff7a.js";const V={index:{type:[Number,String]}};var D=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(e.sticky?"var-sticky":"transition",{ref:"anchorEl",tag:"component",attrs:{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode}},[s("div",e._b({staticClass:"var-index-anchor"},"div",e.$attrs,!1),[e._t("default",function(){return[e._v(e._s(e.name))]})],2)])},F=[];const j=p({name:"VarIndexAnchor",mixins:[y("indexBar",{indexKey:"localIndex",parentKey:"indexBar",childrenKey:"indexAnchors"})],components:{VarSticky:x},inheritAttrs:!1,props:V,data:()=>({ownTop:0,disabled:!1}),computed:{name(){return this.index},active(){return this.indexBar.active},sticky(){return this.indexBar.sticky},cssMode(){return this.indexBar.cssMode},stickyOffsetTop(){return this.indexBar.stickyOffsetTop},zIndex(){return this.indexBar.zIndex}},methods:{setOwnTop(){const{$refs:{anchorEl:e}}=this;!e||(this.ownTop=e.$el?e.$el.offsetTop:e.offsetTop)},setDisabled(e){this.disabled=e}}}),u={};var K=c(j,D,F,!1,R,null,null,null);function R(e){for(let t in u)this[t]=u[t]}var U=function(){return K.exports}();const H={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:Number,default:0},cssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0}};var P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"barEl",staticClass:"var-index-bar"},[e._t("default"),s("ul",{staticClass:"var-index-bar__anchor-list",style:{zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"}},e._l(e.anchorNameList,function(n){return s("li",{key:n,staticClass:"var-index-bar__anchor-item",class:{"var-index-bar__anchor-item--active":e.active===n},style:{color:e.active===n&&e.highlightColor?e.highlightColor:""},on:{click:function(r){return e.anchorClick(n)}}},[e._v(" "+e._s(n)+" ")])}),0)],2)},q=[];const G=p({name:"VarIndexBar",mixins:[k("indexBar",{childrenKey:"indexAnchors"})],props:H,data:()=>({clickedName:"",scroller:null,anchorNameList:[],active:null}),async mounted(){await h(),this.scroller=C(this.$refs.barEl),this.scroller.addEventListener("scroll",this.handleScroll)},beforeDestroy(){var e;(e=this.scroller)==null||e.removeEventListener("scroll",this.handleScroll)},watch:{async indexAnchors(e){await h(),e.forEach(({name:t,setOwnTop:s})=>{t&&this.anchorNameList.push(t),s()})}},methods:{scrollTo(e){T(()=>this.anchorClick(e,!0))},toNumber:d,emitEvent(e){var s,n;const t=b(e)?e.name:e;t===this.active||t===void 0||(this.active=t,(n=(s=this.getListeners()).onChange)==null||n.call(s,t))},handleScroll(){const e=$(this.scroller),t=this.scroller===window?document.body.scrollHeight:this.scroller.scrollHeight,{offsetTop:s}=this.$refs.barEl;this.indexAnchors.forEach((n,r)=>{const o=n.ownTop,i=e-o+this.stickyOffsetTop-s,l=r===this.indexAnchors.length-1?t:this.indexAnchors[r+1].ownTop-n.ownTop;i>=0&&i<l&&!this.clickedName&&(r&&!this.cssMode&&this.indexAnchors[r-1].setDisabled(!0),n.setDisabled(!1),this.emitEvent(n))})},async anchorClick(e,t){var o,i;if(t&&((i=(o=this.getListeners()).onClick)==null||i.call(o,e)),e===this.active)return;const s=this.indexAnchors.find(({name:l})=>e===l);if(!s)return;const n=s.ownTop-this.stickyOffsetTop+this.$refs.barEl.offsetTop,r=S(this.scroller);this.clickedName=e,this.emitEvent(e),await E(this.scroller,{left:r,top:n,animation:g,duration:d(this.duration)}),w(()=>{this.clickedName=""})}}}),f={};var J=c(G,P,q,!1,Q,null,null,null);function Q(e){for(let t in f)this[t]=f[t]}var a=function(){return J.exports}();a.install=function(e){e.component(a.name,a)};var W={title:"\u6807\u9898",text:"\u6587\u672C"},X={title:"Title",text:"Text"};const{add:m,use:Y,pack:Z,packs:xe,merge:ye}=A(),ee=e=>{M(e),Y(e)};v("zh-CN",z);v("en-US",L);m("zh-CN",W);m("en-US",X);var te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("var-index-bar",{attrs:{duration:"300","sticky-offset-top":54},on:{change:e.change}},e._l(e.list,function(n){return s("div",{key:n},[s("var-index-anchor",{attrs:{index:n,class:"var-index-anchor__example",style:{background:e.bgColor,color:e.color}}},[e._v(" "+e._s(e.pack.title)+" "+e._s(n)+" ")]),s("var-cell",[e._v(e._s(n)+" "+e._s(e.pack.text))]),s("var-cell",[e._v(e._s(n)+" "+e._s(e.pack.text))])],1)}),0)},se=[];const ne={name:"IndexBarExample",components:{VarIndexBar:a,VarIndexAnchor:U,VarCell:B},data:()=>({list:[],bgColor:"#e7edf7",color:"#2e67ba"}),computed:{pack(){return Z.value}},created(){N(this,ee),O(this,I,e=>{this.bgColor=e==="darkThemes"?"rgb(41, 42, 45)":"#e7edf7",this.color=e==="darkThemes"?"#3980e8":"#2e67ba"})},mounted(){for(let e=0;e<26;e++)this.list.push(String.fromCharCode(65+e))},methods:{change(e){console.log(e)}}},_={};var re=c(ne,te,se,!1,ie,null,null,null);function ie(e){for(let t in _)this[t]=_[t]}var ke=function(){return re.exports}();export{ke as default};
